{
  "stage": "dataset_refinement",
  "timestamp": "2026-02-07T19:38:49Z",
  "inputs": [
    {
      "name": "v1_train",
      "version": "v1",
      "hash": "cac2df83ee8b5364876fcded48a68290c5c87d1199cded3067a1528e05dcbae3"
    },
    {
      "name": "v1_valid",
      "version": "v1",
      "hash": "831651aaede83191e032210418347f4307da849340c9a7e584e637b2e146e813"
    },
    {
      "name": "v1_test",
      "version": "v1",
      "hash": "77eb9febd859d46935da43d32b0dced610a77671309357b49c672b9b8db501a0"
    }
  ],
  "outputs": {
    "train_split": {
      "path": "dataset/v2/train.jsonl",
      "hash": "2fd9dee0f34986e5d1da87853b25cbee2adbd602df5871a2604d2e7ee6bdccb8"
    },
    "valid_split": {
      "path": "dataset/v2/valid.jsonl",
      "hash": "f3197ace02434c873ecfd75eb81a40e2db1f0b4b50e288ead2ddd9e2720eccc3"
    },
    "test_split": {
      "path": "dataset/v2/test.jsonl",
      "hash": "5827c5a1cd9d3ad3ca71505009306ec2445566d4cd2cca895b5c0416ecc018f5"
    },
    "rejected_samples": {
      "path": "dataset/v2/rejected.jsonl",
      "hash": "62ccc948ceab950b01add220d6bcb43570ed2fef1b0aaaf897247025b646e75d"
    },
    "eval_candidate_pool": {
      "path": "dataset/v2/eval_candidate_pool.jsonl",
      "hash": "88a70d0047a638703834ace327596e95b233745f9f60fda2430c0800fb30f030"
    },
    "training_pool_clean": {
      "path": "dataset/v2/training_pool_clean.jsonl",
      "hash": "db0d3b66881a09497ad15ce61edf2505fc4a8d61be7317ead4caee74f1a0466c"
    },
    "training_pool_experimental": {
      "path": "dataset/v2/training_pool_experimental.jsonl",
      "hash": "ac0d9b3fa315b40b16c05c0d36db088181e7fcebc3d029f8e4737740e6c507bc"
    }
  },
  "metrics": {
    "input_total": 18076,
    "filtered_total": 16159,
    "chunked_source_records": 1456,
    "chunked_total_records": 17964,
    "rebalanced_total_records": 10076,
    "dropped_test_records": 0,
    "augmented_records": 3587,
    "augmentation_candidate_pool": 4783,
    "final_total": 13663,
    "test_ratio_before_rebalance": 0.4391,
    "test_ratio_after_rebalance": 0.0,
    "split_train": 10929,
    "split_valid": 1366,
    "split_test": 1368,
    "eval_candidate_pool_size": 7888,
    "exclude_test_sources_from_training_pool": true,
    "yield_breakdown": {
      "input_records": 18076,
      "after_validation_filter": 16159,
      "after_chunking": 17964,
      "after_test_pool_extraction": 10076,
      "after_augmentation": 13663,
      "rejected_records": 1917
    },
    "feedback_targets": {
      "source": "/home/seutje/projects/DrupalGym/eval/metrics.json",
      "weak_categories": [
        "sdc",
        "di"
      ],
      "details": [
        {
          "category": "sdc",
          "negative_prompt_count": 1,
          "avg_delta": -0.3334
        },
        {
          "category": "di",
          "negative_prompt_count": 1,
          "avg_delta": -0.25
        }
      ]
    },
    "rejection_reasons": {
      "malformed_instruction_class_slot": 1908,
      "truncation_artifact": 4,
      "class_trait_mismatch": 1,
      "class_enum_mismatch": 1,
      "class_interface_mismatch": 3,
      "augmentation_non_php_source": 4064,
      "augmentation_chunked_source": 551,
      "augmentation_non_php_output": 678
    },
    "sample_type_distribution": {
      "retrieval": 10076,
      "bugfix": 897,
      "refactor": 897,
      "write_from_spec": 897,
      "explain_and_implement": 896
    },
    "clean_pool_size": 10076,
    "experimental_pool_size": 3587
  },
  "config": {
    "input_version": "v1",
    "output_version": "v2",
    "seed": 42,
    "max_output_lines": 300,
    "chunk_overlap_lines": 30,
    "target_test_ratio": 0.15,
    "exclude_test_sources_from_training_pool": true,
    "augmentation": {
      "enabled": true,
      "ratio": 0.75,
      "input_excerpt_lines": 120,
      "types": [
        "bugfix",
        "refactor",
        "write_from_spec",
        "explain_and_implement"
      ]
    }
  }
}